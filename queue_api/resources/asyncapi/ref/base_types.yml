components:
  schemas:
    camera_list_object:
      type: array
      description: List of camera objects
      items:
        $ref: '#/components/schemas/camera_obj'
    camera_obj:
      type: object
      description: camera object
      properties:
        id:
          $ref: '#/components/schemas/camera_id'
        name:
          $ref: '#/components/schemas/camera_name'
        address_primary:
          $ref: '#/components/schemas/camera_address_primary'
        address_secondary:
          $ref: '#/components/schemas/camera_address_secondary'
        storage_id:
          $ref: '#/components/schemas/storage_id'
#        archive_path:
#          $ref: '#/components/schemas/camera_archive_path'
        schedule_id:
          $ref: '#/components/schemas/schedule_id'
        storage_days:
          $ref: '#/components/schemas/camera_storage_days'
        analysis_type:
          $ref: '#/components/schemas/camera_analysis_type'
        stream_address:
          type: string
          examples:
            - 'rtmp://80.254.48.93:1935/vasrc/cam20_2019-10-29_15-29-00.586164'
        status:
          type: string
          description: camera status
          examples:
            - "RUNNING"
            - "BACKOFF"
        enabled:
          type: boolean
          description: recording status
          examples:
            - True
    storage_list_object:
      type: array
      description: list of storage objects
      items:
        $ref: '#/components/schemas/storage_obj'
    storage_obj:
      type: object
      description: storage object
      properties:
        id:
          $ref: '#/components/schemas/storage_id'
        name:
          $ref: '#/components/schemas/storage_name'
        path:
          $ref: '#/components/schemas/storage_path'

    schedule_time_object:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/schedule_id'
        type:
          $ref: '#/components/schemas/schedule_type'
    schedule_timestamp_object:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/schedule_id'
        type:
          $ref: '#/components/schemas/schedule_type'
    schedule_time_period_object:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/schedule_id'
        type:
          $ref: '#/components/schemas/schedule_type'

    schedules_list_object:
      type: object
      properties:
        weekdays:
          properties:
            schedule_id:
              properties:
                days:
                  type: array
                  description: Array of weekdays
                  examples:
                    - [1, 3, 7]
        timestamp:
          properties:
            schedule_id:
              properties:
                start_timestamp:
                  $ref: '#/components/schemas/schedule_start_timestamp'
                stop_timestamp:
                  $ref: '#/components/schemas/schedule_stop_timestamp'
        time_period:
          properties:
            schedule_id:
              properties:
                start_time:
                  $ref: '#/components/schemas/schedule_start_time'
                stop_time:
                  $ref: '#/components/schemas/schedule_stop_time'

    status_hardware_object:
      type: object
      description: Hardware information
      properties:
        ip_address:
          type: string
          examples:
            - '10.10.1.5'
            - '192.168.88.231'
            - '80.254.77.50'
        ocular_version:
          type: string
          examples:
            - 'v1.3.2'
        uptime:
          type: string
          examples:
            - 'up 16 hours, 47 minutes'
        load_average:
          type: array
          examples:
            - [1.02, 0.71, 0.67]
        cpu_utilization_perc:
          type: integer
          minimum: 0
          maximum: 100
          examples: 
            - 55
        disk_usage_perc:
          type: integer
          minimum: 0
          maximum: 100
          examples: 
            - 49
        default_video_directory:
          type: string
          examples:
            - '/home/_VideoArchive'
    service_status:
      type: object
      description: Service status object
      properties:
        status:
          type: string
          examples:
            - "RUNNING"
            - "STOPPED"
        error_code:
          $ref:  '#/components/schemas/error_code'
        error_message:
          type: string
          examples:
            - null
            - "Process exited because of error on launch"
    status_services_object:
      type: object
      description: Status of ocular services
      properties:
        wsdaemon_worker:
          $ref: '#/components/schemas/service_status'
        wsdaemon_admin:
          $ref: '#/components/schemas/service_status'
        theorem_worker:
          $ref: '#/components/schemas/service_status'
        theorem_admin:
          $ref: '#/components/schemas/service_status'
        nginx:
          $ref: '#/components/schemas/service_status'
        rabbitmq_receiver:
          $ref: '#/components/schemas/service_status'
    camera_status_object:
      type: object
      description: Camera status object
      properties:
        camera_id:
          type: object
          properties:
            status:
              type: string
              examples:
                - "RUNNING"
                - "BACKOFF"
                - "DISABLED"
            error_code:
              $ref:  '#/components/schemas/error_code'
            error_message:
              type: string
              examples:
                - null
                - "Connection refused"


    error_code:
          type: integer
          examples:
            - 0
            - 4
    common_id:
      type: integer
      examples:
        - 4
        - 283
        - 17
    camera_id:
      type: string
      description: Camera id
      examples:
        - 'cam22_2019-10-29_15-29-00.743260'
    camera_name:
        type: string
        examples:
          - 'Reception camera #1'
    camera_address_primary:
      type: string
      description: Primary stream from camera (on maximum resolution)
      examples:
        - 'rtsp://root:AaBbCc@91.154.24.22:554/FullHD_live.sdp'
    camera_address_secondary:
      type: string
      description: Secondary stream from camera (on lower resolution, optional)
      examples:
        - 'rtsp://root:AaBbCc@91.154.24.22:554/SD_live.sdp'
    camera_archive_path:
      type: string
      examples:
        - '/home/_VideoArchive/cam1'
    camera_archive_path_optional:
      type: string
      default: '/home/_VideoArchive'
    camera_analysis_type:
      type: integer
      description: |
       1 - without analysis,
       2 - only motion,
       3 - full analysis
      enum: 
        - 1
        - 2
        - 3
    camera_storage_days:
      type: integer
      enum:
        - 7
        - 14
        - 30
    storage_id:
      type: integer
      description: id of storage which used by camera (referencing to storage object)
      examples:
        - 4
        - 283
        - 17
    storage_name:
      type: string
      examples: 
        - "main_storage_1"
    storage_path:
      type: string
      examples:
        - "/home/_VideoArchive"
    schedule_id:
      type: integer
      description: id of schedule which used by camera (referencing to schedule object)
      examples:
        - 4
        - 283
        - 17
    schedule_type:
      type: string
      description: type of scheduling
      enum: 
        - weekdays
        - timestamp
        - time_period
    schedule_weekdays:
      type: array
      description: Array of weekdays
      examples:
        - [1, 3, 7]
    schedule_start_timestamp:
      type: string
      description: start timestamp for scheduling (in unix timestamp)
      examples:
          - "1572273590"
    schedule_stop_timestamp:
      type: string
      description: stop timestamp for scheduling
      examples:
          - "1572273591"
    schedule_start_time:
      type: string
      description: start time for scheduling (hour, minute and second HH-MM-SS)
      examples:
        - "07-49-00"
    schedule_stop_time:
      type: string
      description: stop time for scheduling (hour, minute and second HH-MM-SS)
      examples:
        - "22-31-30"
    uuid:
      type: string
      description: Unique identifier for send-receive actions
      examples:
        - '31b9448f-9ea3-429f-a04d-23c7c7ac77d3'
    command_base:
      type: string
      description: identifier for command to execute
    data_common:
      type: object
      description: data of message
    data_empty:
      type: object
      description: data of message
      const: {}
    data_success:
      type: object
      properties:
        success:
          type: boolean
          const: True
    data_error:
      type: object
      properties:
        success:
          type: boolean
          const: False
        code:
          type: integer
          examples:
            - 2
            - 7
        error:
          type: string
          examples:
            - 'Some error occurred'
