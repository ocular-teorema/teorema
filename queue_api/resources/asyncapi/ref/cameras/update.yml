channels:
  cameras_update_request:
    subscribe:
      description: Send messages to update camera
      operationId: cameras_update
      message:
        name: cameras_update
        title: Message to update camera
        contentType: application/json
        payload:
          type: object
          required:
            - uuid
            - type
            - data
          properties:
            uuid:
              $ref: '../base_types.yml#/components/schemas/uuid'
            type:
              type: string
              const: 'cameras_update'
            camera_id:
              $ref: '../base_types.yml#/components/schemas/camera_id'
            data:
              type: object
              description: data with parameters of camera
              properties:
                name:
                  $ref: '../base_types.yml#/components/schemas/camera_name'
                address_primary:
                  $ref: '../base_types.yml#/components/schemas/camera_address_primary' 
                address_secondary:
                  $ref: '../base_types.yml#/components/schemas/camera_address_secondary' 
                analysis_type:
                  $ref: '../base_types.yml#/components/schemas/camera_analysis_type'
                storage_days:
                  $ref: '../base_types.yml#/components/schemas/camera_storage_days'
                storage_id:
                  $ref: '../base_types.yml#/components/schemas/storage_id'
                schedule_id:
                  $ref: '../base_types.yml#/components/schemas/schedule_id'
  cameras_update_response:
    publish:
      description: Receive messages with status of added camera
      operationId: cameras_update
      message:
        oneOf:
          - $ref: '#/components/messages/success'
          - $ref: '#/components/messages/error'

components:
  messages:
    success:
      name: cameras_update
      title: Message with success status of request to update camera
      contentType: application/json
      payload:
        type: object
        properties:
          uuid:
            $ref: '../base_types.yml#/components/schemas/uuid'
          type:
            type: string
            const: 'cameras_update'
          camera_id:
            $ref: '../base_types.yml#/components/schemas/camera_id'
          data:
            $ref: '../base_types.yml#/components/schemas/data_success'
    error:
      name: cameras_update_response
      title: Message with error status of request to update camera
      contentType: application/json
      payload:
        type: object
        required:
          - uuid
          - type
          - camera_id
          - data
        properties:
          uuid:
            $ref: '../base_types.yml#/components/schemas/uuid'
          type:
            type: string
            const: 'cameras_update_response'
          camera_id:
            $ref: '../base_types.yml#/components/schemas/camera_id'
          data:
            $ref: '../base_types.yml#/components/schemas/data_error'